// RUN-DISABLED: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0 = call @inputs() : () -> tensor<20x20xf16>
    %1 = call @expected() : () -> tensor<20x20xf16>
    %2 = stablehlo.abs %0 : tensor<20x20xf16>
    %3 = stablehlo.constant dense<1.000000e+00> : tensor<20x20xf16>
    %4 = stablehlo.compare  GT, %2, %3 : (tensor<20x20xf16>, tensor<20x20xf16>) -> tensor<20x20xi1>
    %5 = stablehlo.constant dense<0x7E00> : tensor<20x20xf16>
    %6 = stablehlo.log_plus_one %0 : tensor<20x20xf16>
    %7 = stablehlo.negate %0 : tensor<20x20xf16>
    %8 = stablehlo.log_plus_one %7 : tensor<20x20xf16>
    %9 = stablehlo.subtract %6, %8 : tensor<20x20xf16>
    %10 = stablehlo.constant dense<5.000000e-01> : tensor<20x20xf16>
    %11 = stablehlo.multiply %9, %10 : tensor<20x20xf16>
    %12 = stablehlo.select %4, %5, %11 : tensor<20x20xi1>, tensor<20x20xf16>
    %13 = stablehlo.custom_call @check.eq(%12, %1) : (tensor<20x20xf16>, tensor<20x20xf16>) -> tensor<i1>
    return %13 : tensor<i1>
  }
  func.func private @inputs() -> tensor<20x20xf16> {
    %0 = stablehlo.constant dense<"0x14246ABCE22F69C357C56C3C76BEB2C40245B039534262BB823DEFB005C1D2367FB50BBCD42A383F1A33734577B203418D42803B8C44DB26D83EFEBE923249B998BB6B442241E93074C60A3843A807BDC8C3C3C345C2CF4050C05E41AF433B3C073E2C3DE2C466C2454316C759C2FE3E8B44B6BE7F3C8BC53DC3803C443D92420E455138443F01BA9541A2240243044192381F4388BA97458130A544D2B4CC418FC2D0C57AC6DF43403D50B829C4C5C38CB11CC1EB310C3E15BB7A4019486B4276BCA9C1CBBCCABA14C0E71E76447EBB54C0FF41F63E26C14445EEB86D43D044233B1FC42DA98AB967445239C5C226C32FB91A43792D3540CBC1D342D4C51A4033C22743C144E142FDAEBA3A7F3F1D4025BC63352547A43F2342FAB7A64034C28FBD10C431C2093FD2419DC4BEBFED3E49B417C052454BBF6FBE383C61C4BA304030EDB514BB66C3C43A92C1BE4299447EC4CABC2FB91242DA41643E5335B23947BDBC3E27BE2746BFBCD9C0943F04B854BE6D2FE43CE13D9435C7B9C234CC449DC0734263BEB63EC1C1A240B942CB37F9416546B1C1C63449B81F3D40C5543D3A343EBFA6BDACC02B44F6B7F9B7D538293922C255B15EC06B3C4E455941A2BE40C2B1C4D644FBB42440FAB9E6B7F0BD96BBC34287C5483EB5C233BC00BDAE3963C7E03F4D3F90B90643B9BF71C46EB9ADB40A481C34E6BF4B4250B426C41435F7B71E376E37DCBDCE3508C04BC53E40FCC34444FF39DAB53EBF3F2CA7B69FC1B43D174460BCE9C462419B37C4333BC0C5BED1B886B721C0303EFCBDC440463D5E3F32BA88429E3F8E3DE13EE73CF1BDBCBF42C077AAD4C4F8B415BD28BB274130BEECC3C2B9D8ABACA842BE85C43E3CA9409B41A6C5FF2E84AB4941F3BD12C127442EBA3230E2BA41C1DDC7AD3C643BB0A3764448B451BD1A3EDD44CB3DC8AB39BF45354DC475BBB1A9EE40B73C4C423C42ABC0663C403E32C5F7A933C0CD3CAA4611C4DAC38A2EB2C297C2D1B1DE3D71C1CC367DB9BFB913BF3AC1C6C1623FE8C0D5BF83B70A404643E742663EC03FCFA993B99DC5AAC12FC520C2CB3E59BE853AC33BC5C63941E83C14C5BEBF0C44143C92C00130C4BE2A46DEBA7E3D5742"> : tensor<20x20xf16>
    return %0 : tensor<20x20xf16>
  }
  func.func private @expected() -> tensor<20x20xf16> {
    %0 = stablehlo.constant dense<"0x1424007EEC2F007E007E007E007E007E007E1D3B007E6FBE007EFAB0007E4837BBB5007ED62A007E3933007E8EB2007E007EDF3E007EDC26007E007EAA325ABA4CBF007E007EF330007E723844A8007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007ED438007ECBBB007EA224007E007E3239007E96BC007E8930007EFAB4007E007E007E007E007E007ED2B8007E007E9AB1007EFC31007E98BD007E007E007E007E007E007E01BD007EE71E007ED6BE007E007E007E007E007EC0B9007E007EBB3D007E2EA9D2BA007E6A3A007E007E2DBA007E7C2D007E007E007E007E007E007E007E007E007E04AFE63C007E007E007E9A35007E007E007E61B8007E007E007E007E007E007E007E007E007E007E64B4007E007E007E007E007E007EC330463038B696BD007EF73C007E007E007E007E007E2DBA007E007E007E8935203B007E007E007E007E007E007E007E6AB8007E762F007E007ED2354CBBE834007E007E007E007E007E007E007E007E4238007E007E007EEC34C8B8007E007E007E5434007E007E007E007E5FB860B89839223A007E62B1007E007E007E007E007E007E007E007E26B5007EBCBB54B8007E42BF007E007E007E007E007E007E183B007E007E007EDEBA007E007E007E9EBAD1B4007E3434007E007E6CB4007E423560B8A8370638007E1536007E007E007E007E007EC73B23B6007E402C16B7007E007E007E007E007E007E2438EC33007E007E92B916B8007E007E007E007E007E007E20BC007E007E007E007E007E007E007E007E78AA007E24B5007EC7BD007E007E007E42BBDAABACA8007E007E007E007E007E007E062F86AB007E007E007E007E1BBC38302EBD007E007E007E753EB0A3007E64B4007E007E007E007ECBAB007E7935007EB2BEB2A9007E007E007E007E007E007E007E007EF8A9007E007E007E007E007E902E007E007EE2B1007E007E4237B8BA3CBB007E007E007E007E007E007E14B8007E007E007E007E007ED0A9E4BA007E007E007E007E007E007E913C3140007E007E007E007E007E007E007E007E0630007E007E26BD007E007E"> : tensor<20x20xf16>
    return %0 : tensor<20x20xf16>
  }
}

