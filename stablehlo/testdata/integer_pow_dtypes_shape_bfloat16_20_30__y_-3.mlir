// RUN: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0 = call @inputs() : () -> tensor<20x30xbf16>
    %1 = call @expected() : () -> tensor<20x30xbf16>
    %2 = stablehlo.multiply %0, %0 : tensor<20x30xbf16>
    %3 = stablehlo.multiply %0, %2 : tensor<20x30xbf16>
    %4 = stablehlo.constant dense<1.000000e+00> : tensor<bf16>
    %5 = stablehlo.broadcast_in_dim %4, dims = [] : (tensor<bf16>) -> tensor<20x30xbf16>
    %6 = stablehlo.divide %5, %3 : tensor<20x30xbf16>
    %7 = stablehlo.custom_call @check.eq(%6, %1) : (tensor<20x30xbf16>, tensor<20x30xbf16>) -> tensor<i1>
    return %7 : tensor<i1>
  }
  func.func private @inputs() -> tensor<20x30xbf16> {
    %0 = stablehlo.constant dense<"0x94C092BF9F405F40684061C04DC0D9404B3F363E523F08C09740B340C1BD20C044408CC0B5BF50BE7EBFF0BF1F4064BFBC3F393E09C0C33F1D40DA3F4E407040723E64BF16C02C408DC036401B3F9040A3BF0D402A408BBFF6BF1140AFC044408C3E5140173EDCC09C3EF93F13C01A40CF3FB4C0D33FE7BE6A406F407AC05340C53E8640C3C01EBF46C07EC0344085BF9ABFAABF24BF11C0763F654009BF9B40A6BF7EBF84C0113F92BF0040DA3F9E3FA640564053BFC7BF4C3F23C0FC4003419E3F5E4012BFC1C02AC05AC0E4BF2CBE943F26C092BE11C05E3D77408EC03BC059BFC5BF60BFB13FFCC0CDC099C098BFB6C07BC02AC0C43A94403DC0BEBD5AC0D83FC0C04FBF7AC079400040F53F313F37BE31C0D93BC1BE8D409BC016C0903F3D40463F93BF7D40C34004406C3FF03F863FB43D683FBB4097BE1540D6BFB63FD93F79BEA73F10C0EEBE5EC091C003C0B93F9CBF6D40173E2840C0BF264043BE0E4003C0403F33C0A03F7FBFAE3F183FFABFA1C0A33F973F44BFA94006BC28BF923F8EC09040494085BF0CC0813FB7BF5940C3BF2DC0C640793FD53E153F47C0E33F3A40D5C0A7BF23C05EBE64BF79BFC83F9C3D1C4098BF5C3F773FD4C0EF3F8B407BBF99BE4AC083C059C00B4058C0DCBF484091405FC08DC03ABE2D40D9BF06C03640CD3F19C0B43F7A402B400CC019C077C03E3EDBBFABC06DBF0EC06EC08140DFBF4BC01C3E62C0BB408C3E26C0A5BF2F3F6EC0053FBA3FCE3E41BFFFBEFD3F87BF45C072C0ECBE1FC04DC059C021409EC0EBBF44C088407EBE2FC17F4038BFDDBF27C097C05DBF1841AB3FC4BFEB3F86C0183F9CC0A3C041C096C00DC170C0704066C0D3BFF6C07C406D404ABFE4BF1440F1C04E408740B83E24C093BF9EC08EC0073F42406CC00C403FBFA7C00BC08D3E40400F40BDBF2DC029BF92BF09C0E1BF5BC0353F2FBFCB40A2BF85405BC00C40C83E9E3D00C01CC042C0D83F9FC004412EC0EF3EE33EF3400340A2BC65C03FBF5F40943F393FF8BFA6BFA6C094C0BDC0C23EB6BF603DE23FF3BF2B3F40BF84405A40B1BE403F2A40AABEF6C09E4099BFB8BEC5C057C0A6BE0FBF75BF29C09CBFB53E38403CBF873C82BFEA3F7DC05740BFC06440F1BEDCC0B440F1BF4240B0C0A0C0373FC53F0A3F593D783F133FA7C073C0664014C014401D3F353FC8C0243F00BEEB3EBFBF85BE0B3FAF3ED93F5E402EC05C3F803F96C009C00DC0A1C0073F6BC05D40AC408E40203FC4405E3E37409B3E86C029C0063F2EBC7D3F43BE2DBF3740214044BF33BE0F4040C0DBBEE4BFAD4042C0FB3FCFC083C08CBD3DC097BF0AC0FF3FFBBFA4C029C029BF0DC0993F5CBF1B406440FFBF86C081401E3F23BFA9C02BC0833F1FC04040E6BE5EC049C084C02D4038C061BF2F4034C0913F41BF89BF413F4FC08DBEAE3FA33F12408A40B23F93BF9FC03EBEC5BE043F9DC0ECC071C0D6BFC8BF83BE2040AB3FA4BF883F4240A23FB93FF4BFB1BE9BC06040824091BF993F0DC06040D4401FC016405E4079BF104089BF1B40C83F1E409DC0824078BFB4BDA13E0F41DBBF1DC0473F83BFBC4025C09F3FE2BE023F08411A40EB3FAF4077C07E40ECBEB64054405C401C40B1BFD1BF4D4084401E4070BF024015C0B03E3DC0973F5A40423FED3F17C09A400C405BC050BF3B40FE3FD03F"> : tensor<20x30xbf16>
    return %0 : tensor<20x30xbf16>
  }
  func.func private @expected() -> tensor<20x30xbf16> {
    %0 = stablehlo.constant dense<"0x25BC2CBF053CC23CAC3CBCBCFABC523B01403343E83FD6BD1C3CBB3B95C483BD0E3D44BCB5BEEFC283BF1BBE853DB5BFA13E2943D1BD903E8A3D4F3EF53C9B3C9842B5BF9FBD533D40BC333D9040343CF8BEC03D5A3D48BF10BEB03DC9BB0E3D4442EA3C9C434ABB0D420B3EA9BD933D733EB8BB653E2EC1A73C9E3C8ABCE53C8C415F3C90BB88C00ABD83BC383D65BF13BFDABE73C0B0BD903FB33CD1C0103CECBE83BF6ABCB0402CBF003E4F3E083FEC3BDA3CE5BF88BEFC3F78BD063BEF3A083FC43CACC095BB5ABDCFBC35BE53C3253F6CBD2CC2B0BDC4458E3C3BBC24BDD2BF8CBEBFBFC23E06BB7ABB16BC19BFB3BB88BC5ABD8E4D253C1EBD9DC4CFBC553E98BBF3BF8ABC8B3C003E123E42402FC342BD524A95C1403C10BC9FBD343F1E3D0A4029BF853C903BEA3DA33F1B3E5F3FB844AC3FA43B1CC2A33D5ABEB33E523E8BC2E73EB4BD20C1C4BC30BCEFBDA93E0DBFA13C9C43643D98BE6C3D10C3BB3DEFBD18403BBD033F82BFCC3E99400ABE01BCF83E1C3F0EC0DF3BDFC964C02C3F3BBC343C043D65BFC4BD7A3FAFBED23C90BE4FBD8A3B8B3F5F41A34008BD383E273D5FBBE7BE78BDC4C2B5BF8BBF863E0D458D3D19BFCA3F8E3F60BB1E3E483C88BF16C203BD6FBCD2BCC83DD5BC4ABE063D303CC2BC40BC27C34F3D52BEDFBD333D7A3E96BDB83E8A3C583DC4BD96BD8EBC1D434DBED8BBA1BFBBBDA0BC7A3C42BE01BD8D43B9BCA43B44426CBDEFBE4940A0BCE540A73E754115C002C1053E5ABF0CBD98BC23C185BDFABCD2BC813D08BC25BE0EBD563C83C249BA823C2CC047BE67BD1CBCC7BF993AD83E8EBE253E5FBC99400DBCF8BB15BD1FBCC0BA9BBC9B3CB0BC65BE10BB863CA13C03C035BEA53D19BBF53C5A3CAC4173BD29BF08BC3BBCDA40133DA3BCC43D1AC0E7BBC8BD4042183DB73D9EBE4FBD5FC02CBFD1BD3CBECDBC354049C0813BFCBE653CCDBCC43D8641084500BE8DBD13BD553E05BCEA3A4CBD1E413841163BEF3DFCC7B3BC1AC0C23C253F29400DBEECBEECBB25BC9EBB9341B3BEBF45393E16BE584018C06A3CCF3CC2C118405A3DDAC110BB083C16BFACC18CBBD8BCECC1B7C092BF5FBD0DBFB5412C3D21C05A4875BF273E85BCD83C9ABBB53C19C14ABBB83B19BE133DC5BB03BC2F408C3ECC40D2458D3FA940E7BB96BCB03CA5BDA53D8A40354086BB734000C425419ABE65C2C840C941523EC43C4CBDCA3F803F1FBCD1BDC0BD01BCDA40A5BCC73CD33B3B3C83408E3BC4422F3D10425FBC5FBDDF404CC9853F10C34FC02F3D813D0EC03BC3B73D18BD4DC135BECF3B13BD083E73BB6FBC44C51EBD1CBFCCBD023E08BEF3BB5FBD5FC0C0BD163FCABF903DB53C02BE5FBC7A3C884078C0DFBB58BD6F3F85BD183D30C1C4BC04BD6ABC4F3D2CBDBCBF493D38BD303F15C051BF1540F3BC40C2CC3EF83EAC3D4C3CBF3E29BF05BC1DC38CC1EA400ABC23BB99BC5ABE86BE6FC2833DD83EF3BE563F133DFC3EA93E14BEC2C110BCBF3C753C30BF163FC0BDBF3C603B85BD9F3DC43C8BBFB43D51BF903D863E883D0ABC753C8DBFB8C40142B73A4DBE8ABD08406FBFA13B6FBD053F39C1F540D63A933D253EC93B8EBC833C23C1B33BE03CCA3C8D3DC2BE6ABEFA3C6A3C883D9BBFF53DA3BDC5411EBD1C3FCF3C1340213E9CBD133CC43DCDBCEFBF243D033E6F3E"> : tensor<20x30xbf16>
    return %0 : tensor<20x30xbf16>
  }
}
