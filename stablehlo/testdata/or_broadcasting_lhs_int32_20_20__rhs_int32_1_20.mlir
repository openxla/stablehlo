// RUN: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0:2 = call @inputs() : () -> (tensor<20x20xi32>, tensor<1x20xi32>)
    %1 = call @expected() : () -> tensor<20x20xi32>
    %2 = stablehlo.broadcast_in_dim %0#1, dims = [0, 1] : (tensor<1x20xi32>) -> tensor<20x20xi32>
    %3 = stablehlo.or %0#0, %2 : tensor<20x20xi32>
    %4 = stablehlo.custom_call @check.eq(%3, %1) : (tensor<20x20xi32>, tensor<20x20xi32>) -> tensor<i1>
    return %4 : tensor<i1>
  }
  func.func private @inputs() -> (tensor<20x20xi32>, tensor<1x20xi32>) {
    %0 = stablehlo.constant dense<"0xFEFFFFFFFCFFFFFF02000000FBFFFFFFFEFFFFFFFFFFFFFFFEFFFFFFFEFFFFFF000000000000000002000000FFFFFFFF0000000000000000FFFFFFFFFFFFFFFF0100000000000000FEFFFFFFFFFFFFFF0200000001000000FEFFFFFF000000000300000000000000FFFFFFFF0200000001000000FEFFFFFFFDFFFFFF000000000200000003000000FDFFFFFFFCFFFFFF0000000000000000FEFFFFFF0300000001000000FFFFFFFF01000000FAFFFFFF0200000005000000010000000200000004000000000000000100000005000000FEFFFFFF040000000000000000000000000000000100000002000000FFFFFFFF00000000FEFFFFFFFEFFFFFFFDFFFFFF00000000F9FFFFFF02000000FDFFFFFF01000000FBFFFFFFFAFFFFFF030000000000000000000000FAFFFFFFFDFFFFFF0000000000000000FFFFFFFFFFFFFFFF0000000001000000FFFFFFFF00000000FFFFFFFF00000000010000000000000001000000000000000000000004000000020000000100000003000000FFFFFFFF04000000FFFFFFFF02000000FCFFFFFF0400000000000000FFFFFFFF0200000001000000FFFFFFFF01000000FFFFFFFFFEFFFFFF01000000020000000100000000000000FAFFFFFF00000000FBFFFFFF04000000FFFFFFFF0000000000000000FDFFFFFF01000000FDFFFFFF01000000FFFFFFFF00000000FEFFFFFF0200000001000000000000000200000000000000050000000000000000000000FEFFFFFF000000000200000001000000F8FFFFFFFFFFFFFFFFFFFFFF0400000001000000FEFFFFFFFEFFFFFFFCFFFFFF01000000FEFFFFFF0000000000000000030000000500000000000000FDFFFFFF0000000002000000FFFFFFFFFBFFFFFF01000000FCFFFFFFFEFFFFFF02000000FEFFFFFFFFFFFFFFFFFFFFFFFAFFFFFF02000000FFFFFFFF01000000FFFFFFFFFFFFFFFF060000000200000002000000FDFFFFFF0100000001000000FEFFFFFF00000000F9FFFFFFFDFFFFFF04000000FEFFFFFF00000000FDFFFFFF010000000000000003000000FFFFFFFF00000000FFFFFFFF00000000FDFFFFFF00000000FEFFFFFF0200000000000000FFFFFFFF030000000000000000000000050000000200000001000000FDFFFFFFFDFFFFFF0000000002000000FFFFFFFF02000000000000000300000000000000050000000100000002000000FDFFFFFFFDFFFFFF00000000FDFFFFFFFFFFFFFF02000000FDFFFFFF00000000FFFFFFFFFFFFFFFF04000000FFFFFFFF0300000000000000FDFFFFFF01000000070000000100000000000000FCFFFFFFFEFFFFFFFDFFFFFFFFFFFFFF01000000F9FFFFFF03000000020000000000000002000000FFFFFFFF0000000001000000FFFFFFFF04000000060000000400000000000000FEFFFFFFFCFFFFFF0200000002000000FFFFFFFF06000000000000000600000004000000FBFFFFFF00000000F7FFFFFF04000000FEFFFFFF0000000002000000FFFFFFFF0000000003000000000000000000000000000000FFFFFFFF02000000000000000100000000000000FEFFFFFF00000000000000000000000000000000FBFFFFFFFEFFFFFF04000000000000000100000000000000FDFFFFFFFEFFFFFFFEFFFFFF0100000001000000FDFFFFFF0000000005000000FBFFFFFF02000000FFFFFFFFFDFFFFFF0400000000000000FEFFFFFFFEFFFFFF0000000002000000000000000200000004000000FEFFFFFF000000000000000001000000FEFFFFFFFEFFFFFF03000000FEFFFFFFFEFFFFFF01000000FFFFFFFF02000000FEFFFFFF000000000200000002000000010000000100000000000000FDFFFFFFFEFFFFFF0200000000000000FCFFFFFFFFFFFFFFFEFFFFFF0100000000000000FFFFFFFFFFFFFFFFFEFFFFFF000000000100000001000000FFFFFFFF01000000FAFFFFFFFCFFFFFF05000000FEFFFFFF03000000FFFFFFFF03000000FFFFFFFFFBFFFFFF0000000002000000FCFFFFFF0200000001000000070000000100000000000000000000000000000000000000030000000000000000000000FDFFFFFF0100000002000000FFFFFFFF000000000300000001000000FDFFFFFF0100000000000000FCFFFFFFF8FFFFFFFDFFFFFFFDFFFFFF0800000000000000FEFFFFFFFFFFFFFFFFFFFFFF01000000FBFFFFFF02000000010000000300000003000000000000000500000002000000"> : tensor<20x20xi32>
    %1 = stablehlo.constant dense<[[-3, -1, 0, -2, -1, 0, 3, 3, -1, 1, -1, 1, 4, -3, -2, 1, 0, -3, -2, 0]]> : tensor<1x20xi32>
    return %0, %1 : tensor<20x20xi32>, tensor<1x20xi32>
  }
  func.func private @expected() -> tensor<20x20xi32> {
    %0 = stablehlo.constant dense<"0xFFFFFFFFFFFFFFFF02000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF01000000FFFFFFFFFFFFFFFF04000000FDFFFFFFFFFFFFFFFFFFFFFF01000000FDFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFEFFFFFFFFFFFFFF00000000FFFFFFFF03000000FFFFFFFFFFFFFFFFFFFFFFFF0100000006000000FFFFFFFFFFFFFFFFFDFFFFFF00000000FDFFFFFFFEFFFFFF03000000FDFFFFFFFFFFFFFF01000000FEFFFFFFFFFFFFFF050000000300000003000000FFFFFFFF01000000FFFFFFFF05000000FEFFFFFFFDFFFFFFFEFFFFFF0100000000000000FDFFFFFFFEFFFFFFFFFFFFFFFDFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFF9FFFFFF03000000FFFFFFFFFFFFFFFFFBFFFFFFFFFFFFFF0300000004000000FDFFFFFFFEFFFFFFFDFFFFFF00000000FDFFFFFFFFFFFFFFFFFFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFF000000000300000003000000FFFFFFFF01000000FFFFFFFF0500000006000000FDFFFFFFFFFFFFFFFFFFFFFF04000000FFFFFFFFFEFFFFFFFCFFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFF03000000FFFFFFFFFFFFFFFF01000000FFFFFFFF0100000004000000FFFFFFFFFEFFFFFFFBFFFFFF04000000FFFFFFFFFEFFFFFF00000000FDFFFFFFFFFFFFFFFDFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFF03000000FFFFFFFF01000000FFFFFFFF0100000005000000FDFFFFFFFEFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFFF8FFFFFFFFFFFFFFFFFFFFFF04000000FFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFF03000000FFFFFFFF01000000FFFFFFFF0300000005000000FDFFFFFFFFFFFFFF0100000002000000FFFFFFFFFFFFFFFF01000000FDFFFFFFFFFFFFFF02000000FEFFFFFFFFFFFFFFFFFFFFFFFBFFFFFF03000000FFFFFFFF01000000FFFFFFFFFFFFFFFF06000000FFFFFFFFFEFFFFFFFDFFFFFF01000000FDFFFFFFFEFFFFFF00000000FDFFFFFFFFFFFFFF04000000FEFFFFFFFFFFFFFFFDFFFFFF0300000003000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF04000000FDFFFFFFFEFFFFFFFFFFFFFF02000000FDFFFFFFFFFFFFFF03000000FDFFFFFFFFFFFFFF05000000FEFFFFFFFFFFFFFFFDFFFFFFFFFFFFFF03000000FFFFFFFFFFFFFFFFFFFFFFFF0100000007000000FDFFFFFFFFFFFFFF0100000002000000FDFFFFFFFFFFFFFF00000000FDFFFFFFFFFFFFFF02000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF07000000FFFFFFFF03000000FFFFFFFFFDFFFFFF05000000FFFFFFFFFFFFFFFF01000000FCFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDFFFFFFFFFFFFFF03000000FEFFFFFFFFFFFFFF02000000FFFFFFFF03000000FFFFFFFFFFFFFFFFFFFFFFFF0700000004000000FDFFFFFFFEFFFFFFFDFFFFFF02000000FFFFFFFFFFFFFFFF06000000FDFFFFFFFFFFFFFF04000000FFFFFFFFFFFFFFFFF7FFFFFF07000000FFFFFFFFFFFFFFFF03000000FFFFFFFF0100000007000000FDFFFFFFFEFFFFFF01000000FFFFFFFFFFFFFFFFFEFFFFFF01000000FDFFFFFFFFFFFFFF00000000FEFFFFFFFFFFFFFF00000000FBFFFFFFFFFFFFFFFFFFFFFF01000000FFFFFFFF01000000FDFFFFFFFFFFFFFFFEFFFFFF0100000001000000FDFFFFFFFEFFFFFF05000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFFFFFFFFFF03000000FFFFFFFF0300000004000000FFFFFFFFFEFFFFFF0100000001000000FFFFFFFFFEFFFFFF03000000FFFFFFFFFFFFFFFF01000000FFFFFFFFFFFFFFFFFEFFFFFF0300000003000000FFFFFFFF01000000FFFFFFFF01000000FDFFFFFFFFFFFFFFFEFFFFFF01000000FCFFFFFFFFFFFFFFFEFFFFFF01000000FDFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFF0100000003000000FFFFFFFFFFFFFFFFFBFFFFFFFFFFFFFF05000000FEFFFFFFFFFFFFFFFFFFFFFF03000000FFFFFFFFFFFFFFFFFEFFFFFF02000000FDFFFFFFFFFFFFFF01000000FFFFFFFFFFFFFFFF000000000300000003000000FFFFFFFF03000000FFFFFFFF01000000FDFFFFFFFDFFFFFFFEFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFFFDFFFFFFFDFFFFFFFFFFFFFFFCFFFFFFFEFFFFFFFFFFFFFFFDFFFFFF0B00000003000000FFFFFFFFFFFFFFFFFFFFFFFF01000000FFFFFFFFFFFFFFFFFFFFFFFF0300000003000000FDFFFFFFFFFFFFFF02000000"> : tensor<20x20xi32>
    return %0 : tensor<20x20xi32>
  }
}
