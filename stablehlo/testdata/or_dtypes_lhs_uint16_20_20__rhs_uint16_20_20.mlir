// RUN: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0:2 = call @inputs() : () -> (tensor<20x20xui16>, tensor<20x20xui16>)
    %1 = call @expected() : () -> tensor<20x20xui16>
    %2 = stablehlo.or %0#0, %0#1 : tensor<20x20xui16>
    %3 = stablehlo.custom_call @check.eq(%2, %1) : (tensor<20x20xui16>, tensor<20x20xui16>) -> tensor<i1>
    return %3 : tensor<i1>
  }
  func.func private @inputs() -> (tensor<20x20xui16>, tensor<20x20xui16>) {
    %0 = stablehlo.constant dense<"0x0100000000000000000000000100010001000000020001000000060002000000020000000600000001000400050001000200030001000400020004000100020008000200030004000000000002000000000002000100000003000100010000000000040000000400020005000100000001000100050001000600010001000300000000000300020002000100010004000000060000000200020003000000040000000200010002000500000002000200020005000000030005000100030001000000000006000100080000000000030003000600020000000100020002000200010004000200040001000000010000000600020000000200030000000300020004000100010003000400010001000100030001000200040006000100030000000400040003000200000001000200020003000100020001000400020001000100000000000100010000000500040002000000010000000500020000000100020002000000020000000400030003000100020003000200020000000300040001000300020002000400010000000400010000000700010000000300010005000000010000000200010003000200010002000000030001000600010002000200000001000100060007000200040000000200010001000300020001000100000002000200000000000100000002000000010003000200000000000000020004000300020000000200010001000000010007000100000000000100030000000000000000000300010004000300030002000300050001000500010000000100030000000100010002000000000002000100040006000100030003000300010000000200010001000000020002000100000001000200000004000600040002000200040000000800020000000100040000000000010003000100020005000000050003000500020001000000010001000000010002000400000002000700000000000500000004000300010001000400000006000000020004000500020001000100020003000100000001000300010000000200010002000400000003000000000000000400050001000100010000000000010001000100000000000100010000000300"> : tensor<20x20xui16>
    %1 = stablehlo.constant dense<"0x0000020001000100010003000400000000000000010004000300020003000000010000000500010001000200030000000400010002000000010003000200010002000000000001000400010007000100000002000200020004000200010002000100050005000200000005000100030000000000040000000200020003000100000002000300050002000500000003000100030001000100000002000000040000000100030002000200020003000100030000000400010000000000040004000100000002000000010001000100000001000200070003000300060000000200040000000400060001000300020000000800060004000200020004000100010001000300000001000000020000000200020000000200000000000000020004000200000005000400000001000000020002000200000002000100010002000200020002000300010002000100020001000300020000000500020004000200040000000100010003000100000002000500010003000300070006000800000002000100050002000200010000000100050002000100030000000200000000000100000009000000030003000200000000000000000000000000030000000300010000000200010002000400010000000600020003000100010002000200000002000200010000000400000006000100030003000000010000000500010002000100010002000100010000000400010001000100000003000600020000000100040002000000000001000000050001000300080000000100000002000300070003000100050001000100030003000300020001000000040003000200010002000100000002000000010001000200020005000200030001000000000001000400030000000100020002000200030002000400040004000000000000000000010001000100000002000000000002000200040001000100060004000000020002000200010001000000000000000000000003000300020003000100000003000100010000000100040003000400010002000400030001000200000003000300040002000800010003000400020000000000010002000500030001000000000003000200"> : tensor<20x20xui16>
    return %0, %1 : tensor<20x20xui16>, tensor<20x20xui16>
  }
  func.func private @expected() -> tensor<20x20xui16> {
    %0 = stablehlo.constant dense<"0x010002000100010001000300050001000100000003000500030006000300000003000000070001000100060007000100060003000300040003000700030003000A000200030005000400010007000100000002000300020007000300010002000100050005000600020005000100030001000100050001000600030003000300000002000300070002000500010007000100070001000300020003000000040000000300030002000700020003000300030005000400030005000100070005000100000006000100090001000100030003000600070003000300060002000200050004000600060001000300030000000E00060004000200030004000300030005000300010003000400030001000300030001000200040006000100030004000600040007000600000001000200020003000300020003000500030003000300020002000300010002000500060003000300030000000500020004000300060002000100030003000500030003000500030003000300070006000B000400030003000700020006000100000005000500020007000300000003000100050001000100090002000300030002000100020000000300010006000300020003000100010003000700070006000500000006000300030003000300030003000000020002000100000005000000060001000300030002000100000005000300060003000300020003000100010004000100070001000000030007000300000001000400020003000100050003000700030003000D0001000500010002000300070003000100050003000100030003000300060007000100070003000300010002000300010003000000030003000300020005000200030005000600040003000600070000000900020002000300070002000400050007000100020005000000050003000500020003000000010003000200050003000500060006000700020002000700010005000300010001000400000007000300020007000500020003000100030003000100040003000700010002000600030003000600000003000300040002000C00050003000500030000000000010003000500030001000100010003000300"> : tensor<20x20xui16>
    return %0 : tensor<20x20xui16>
  }
}
