// RUN: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0:2 = call @inputs() : () -> (tensor<20x20xui8>, tensor<20x20xui8>)
    %1 = call @expected() : () -> tensor<20x20xui8>
    %2 = stablehlo.or %0#0, %0#1 : tensor<20x20xui8>
    %3 = stablehlo.custom_call @check.eq(%2, %1) : (tensor<20x20xui8>, tensor<20x20xui8>) -> tensor<i1>
    return %3 : tensor<i1>
  }
  func.func private @inputs() -> (tensor<20x20xui8>, tensor<20x20xui8>) {
    %0 = stablehlo.constant dense<"0x01000203000507000103020306040003030404010002040101000100000002030203010401020303010204010301000004000302010302030002050002000101030100020003040000010603020403000002020000000302000103050005030101010400010707030102020201000300010202030002000100010202000104000407000002010306030100030300020201000004010003030200020401000104020500000403000402020002030103010202030001000003010100010201000500060104000105020203040000010400040002010001010102010108020202010102000404000003000200000201000005030000010105000202010101020303020003050006040403020402010202000301040701010100000402020100000202000003040001010102000000010200010100010205000100000000000501030200020100000103010202020702030100010000010100020000020604010201030101040201000100010600050302050100000100010301040001010500000004020201010303040201010302020002"> : tensor<20x20xui8>
    %1 = stablehlo.constant dense<"0x02000103000202030104070101000203020001040101030401040300040301000205010304010002040300020604000002010103010304030301050000000000010002030205010002030105000505000203020200030003000501030103030505010005010201030602020003010203010004020401040104040302020203040602060102050301010301020403010002010105020004010102020100000001050001010201050201000102040002050201010502000103020302020200060503030304000101010300040100010003030005070100010100000100040004000100030200040300010101000200020000010200010300010101030001010102010300000206010200060000000401020000030101020305060402000103000101000102000202030102000003010506020307060303010000010201030103050002090200020301000003030301000200020202020301030100020101020200020203030000020101000503020001060000010500050405010104060005000203010006000002000102000101000102"> : tensor<20x20xui8>
    return %0, %1 : tensor<20x20xui8>, tensor<20x20xui8>
  }
  func.func private @expected() -> tensor<20x20xui8> {
    %0 = stablehlo.constant dense<"0x030003030007070301070703070402030304050501030705010403000403030302070107050303030503040307050000060103030103060303030500020001010301020302070500020307070205070002030202000303030005030701070305050104050107070307020202030103030102060304030401040503020203070406070601020503070303010307030302030101050300070303020205010001050705010106030506030201020701030502030305030001030303020302010605030703040001050303030401000104030700070701010101020101080602060101020306040403030103010002010200050302000103050103030301010303030303030502060506030604020106030203010707010303050604020201030003030001030402030301020000030107060303070703070101000102010305030702020B0300020303010203030703030300030202030301030100020705030201030303070201020101010703070303070100010500050705050105070505000207030207010303040303010303020102"> : tensor<20x20xui8>
    return %0 : tensor<20x20xui8>
  }
}
