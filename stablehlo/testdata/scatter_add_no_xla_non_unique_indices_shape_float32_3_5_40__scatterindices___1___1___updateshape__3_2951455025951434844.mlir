// RUN-DISABLED: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0 = stablehlo.constant dense<1> : tensor<2x1xi32>
    %1:2 = call @inputs() : () -> (tensor<3x5x40xf32>, tensor<3x5x2xf32>)
    %2 = call @expected() : () -> tensor<3x5x40xf32>
    %3 = "stablehlo.scatter"(%1#0, %0, %1#1) ({
    ^bb0(%arg0: tensor<f32>, %arg1: tensor<f32>):
      %5 = stablehlo.add %arg0, %arg1 : tensor<f32>
      stablehlo.return %5 : tensor<f32>
    }) {scatter_dimension_numbers = #stablehlo.scatter<update_window_dims = [0, 1], inserted_window_dims = [2], scatter_dims_to_operand_dims = [2], index_vector_dim = 1>} : (tensor<3x5x40xf32>, tensor<2x1xi32>, tensor<3x5x2xf32>) -> tensor<3x5x40xf32>
    %4 = stablehlo.custom_call @check.eq(%3, %2) : (tensor<3x5x40xf32>, tensor<3x5x40xf32>) -> tensor<i1>
    return %4 : tensor<i1>
  }
  func.func private @inputs() -> (tensor<3x5x40xf32>, tensor<3x5x2xf32>) {
    %0 = stablehlo.constant dense<"0x6480CB3E51B3B840C0B055400DA2D33F1409F8BD0642D63E4E028EBF7CA9CD3EAEF10CC0A3066CC0FA8020BF9FECB4BF3AEDE4BF8CDD5BC051174DBF6EA744409764A6BE98926CBEDD7C9340A7DD174055EC0ABFF4F2A93F7656AC40434216C001FBA040543990C04F175B401B9C3DC0A967633F97D18EBFEB36D53F1D2E72C05F005DC00AE94E3FF8F736BFA1C649C0016EA03F49E372BE22305A3DD9FADE3FE5BAC6C0474AE23F0FB38E403C1C933DE9C9CABF5E5095C0FD32F53F8A19BFC07A6256C070F0AFBFCCAE3A40EA0AEDBF59BB9E40C6D310C0BD9B874099EE7C3F49974840401747408DAFB83E118572C0F569CEC04C43303D5FBCE03F94BF17409A1A32C08CA564402A38B13FE537FFBF904855C04E74953C97862AC0A504C33F1230B7C01BB6B73F548E064043D48CBF640C0AC1B9F631403AAE8EBFBBFA68C0FD8A3040B1F1C4C02CF4C9C04B0976BF24BF113FE977A440C307B7BF7A702EC068BE10C03D2357C03F82E73E0BF4B63F7A65C6BF9B35194068B91E3F6C2CD2BF21637EC06C006EC034EF96C064BE86BED63F8840EFE5C8BFF8BEF840EE5C5640711D80BEF17C40C0B26BBE40CE39ABC0B122B53F11BD86BF007DEF3FBDC19340D4C0384018ADEC40B1831B3FD11735BF71C08FBF58FC55BFA0382AC0ADD6093F3AD186C053418FC0DBB26240CD2956403E7BB3406306DD3FA4E556BF03322BC0C08737C04802C3BF95121A3FD34D86C04F3C85C0B86EC93E27C92DC0404970C044E5FB3FA0AA7EBF9F7C753FCB1877C067EE8E40001AEC3EDEFF7040F2F4CFBEA9682DC0EB8F7CBF188D05C0DE1EA44054AAFEBE8A3194BF210861408D530DC0EBCA0C4043208EBFC6FD90BEC264823FCB5A8B409F4AB0BFBF1205C010C7003E0FF0B6C0DEC896C06074C23FC2501DBF0FFA1240CF851640C97B5D40D79DFEBFBEE931C00185A4C09C003A40E49B04403C59CEBCF3C98640A21164BA2DD969404CF93540478BA4C06AB500C169A7BD40882562C08A24CF3F02AD704054238EC0510F2A4092B5393E00FC0541E8D8BA402A9980BF4DC536402E145DBF1024413F2AE5993F936366BDEE6AE1BEA9405A406F41A140191DC1C0EDE9D3BFC189E63E81E2FD3E1D783F401A37813FD54036C0459594BFAEF3EABFA91BD5C0F0E7FE3F8AE5E8BF1DC00AC0753A0D404B67F9BF3A5ADB3E83B2EB40030CD5C00C6EC1BFF6D4B6BFA96B86C00F86CCC0664E8C40C249B03F2C0A2C3F7949034003EC24BEADC88FBD1E13344087722FBFF8100F401D02BC40E21ACBBE52B47840EEABB93FB9B08E3E56CCAA3E89728FBF831AD2C064C774C0104C1F4025860440151782BE8F1D98C0AD2735C0C96CD13F607FD4BEF90EC6BEFD41FFBFDF662B408F6D04402CE5FABF42D307C00129E83F80B1F1BE1BE10C401F64733FC189D53E087A0EBFE431243FBFE43B3D493CCEC0777C8ABF7D384B40FB3DDEBFDBF992C03E7EB33F63207C3DB5FBA0C02757B54064CEA43F7B14FD3F265D73BF6FC060405FC4BD3E8983F63FEF19BEBF56B1BD3F88A1A63F0BD192C03E82E2BD5F883540B892873F227A97BF54F7A6405DAA5EC0CBBA5DBF958017C015A8F7BF24FCDFBF678C90C0456313C039B3F9BF75CF05C176B374BF73A179C0FC97CEBF83205B3F0D32C840CCB5A83E5B6874404B909C3F99DF4140501FE2C0EF7735BEBFC1793F7512184094AD41BF76FA4CC07DBE0540124A74404BA861BF551F8A40378BA13FD086E0BF43080440725182C07C1F86C0833257BDAE09BCC02546143FE5806540A81298C042EA4A40B431D33F58E15D3F17E41B4041EE93C084D08C4044D530C0201E2F40071C60C07189F2BD59D2BE3FC25B30C0C2CC3A40CB56D5404C47C4C075E1B5BE4AED713F9A1315BD86F5C1BF9E665EC006D439409357873FE6FC85BFA5DABB3F5492B13EF7E77740471B4E408019BD3EB3A7613ED91F1E3F6DD2583F4A2A74BF8031B5BFC1C97F40181D933FF550B2C091EE0840C55DA33FC11035C0BBC5F2BFE5B54C3FA92C5740DC258740E7C86DC04EE75B3E455E06C0F3781BC0C3CEDC3F2694E53FDF4DCABFB07A65BFFE9BBF4003B6CB3E025A1FBE99F9AA3F2E7557C0B261A4BF0E01853FCF1F1F3F076A8BC04DA48A3F9465CF3FBC78104027A38DBD4C2C7C4016FB1F3FCE32A340653507BF01E3A2C029B93CC0145579C0318E75C0FD1C23C0F6F995BE140A4BBF9C6048C0080CC4BE33105CC0436B68C092D4923FAF540FC0CC8D63C0791E28BE64B19940C43DDD3FFFFB0FC04F12073F790A37BF81CDD43EC31F97BFBE218EC04C316FBFF7E458C05DCEFDBFA0E311C0A3043A3DE3E9DA3E913784C0B3BB8940F68619C0AF46A2C0865033BE9F5F1E4067D64A40FCA260C0AF5F13C06E684940FFF13B40801F1341867083C082103940A0F8053ED75CECBF5E5C8E3F70EADD3DD843A4BF12E4C13F8F70F7BF79BDAEBFBDE383BFCB8AA8BF9BF58440CD050A408DAD144042A0843FB3A87EC026168440EA0F0940B4E43DC0D10B29C0E5C983C0A8A8A5BFFBCBD8BFA0CE2E40622776BEA12EFA3F2AF29EBE2B0637C02A36AA40FD176340247B75408DE7CBBD825AD8BF4655A33F609A63409852E5400878273E6FB54B4022458AC05688A5C0A45DB73E2E7E95C01662CD3FEC252F4048157DC0F04CA4BDF2AB67C05A0DADBFD841E8BF9B1ED2BFE3699640D77A8F4076376BBED0424BC0B9715C406BBEA83F9069073FE74821BF18FA6A401B1FF73F75A5E33FDD1BE7BF7701CABF61C859C0ABFE6A3FBA6A5AC02E2BB53FF7E62BC0CA295A3FF0790FBF7BF3443C020B993CD92C1A403DD75140F75367BE2DE992BFF1F7053FC892DCBE80124AC04A3E14C0AD813FBF70D30ABFA39335BE2159B3406033A83FCA23A7BF1ABA633F6D00C9409123B43F0F385D407963A93F63897E3FDABDBBBF76D6AB3ECB4C24C07775B83F24516FC04A170D3F62D840BFC5FE0340B730DC3C1DF7714011D05540CA07D7BD83579EBF2937014072F30040D4AD8C409E943A404BACA63FCDD5163DE6224ABF98765A3F8FB24EC08D97F53EC57CAABF19B5DB3FA60D253FFBCD8B40E28722C010C2CB40EE4EB0408B5C90C04AA0C5C0E037903F3C4E92C0A04DE63F34D354C07685BC407B19E93ECAA041C0F8F120C07788C7BF693BBEC0E035443FF6A76740ED03084090A605C00561DABF1677B3C0DE9A4D4080B6FABF93271D406A9AD4BE9E7AAFBF97429EC0EFE05CC0880D51C08E0467C03FF12EC008344E3F99E52440206709C0F414E13F5C4FF2BF3DEF4140B8A400C08D7D11C01AC1D7C0E62719C044EB6CC088F88640273C55C06E8610C0A2E81F404983A2C0651364BF8D1519C098A012BFF9AF95BF"> : tensor<3x5x40xf32>
    %1 = stablehlo.constant dense<[[[7.49141455, 2.55273771], [1.5830735, -4.19072914], [-0.446815431, -2.43123722], [-1.62790549, -3.06764102], [3.98778558, -0.271301121]], [[-2.83138704, -3.01918578], [-0.895532429, -0.939279913], [-3.21655297, 3.57061505], [1.70857847, 0.782994866], [0.868233382, -1.11388564]], [[-0.115059622, -0.253217578], [2.33645296, -2.8292706], [-5.14203501, -1.92550838], [-3.19648242, -4.73312092], [1.4065572, 0.619808197]]]> : tensor<3x5x2xf32>
    return %0, %1 : tensor<3x5x40xf32>, tensor<3x5x2xf32>
  }
  func.func private @expected() -> tensor<3x5x40xf32> {
    %0 = stablehlo.constant dense<"0x6480CB3E820E7D41C0B055400DA2D33F1409F8BD0642D63E4E028EBF7CA9CD3EAEF10CC0A3066CC0FA8020BF9FECB4BF3AEDE4BF8CDD5BC051174DBF6EA744409764A6BE98926CBEDD7C9340A7DD174055EC0ABFF4F2A93F7656AC40434216C001FBA040543990C04F175B401B9C3DC0A967633F97D18EBFEB36D53F1D2E72C05F005DC00AE94E3FF8F736BFA1C649C0016EA03F49E372BE22305A3DD9FADE3FE5BAC6C0C4FA56BF0FB38E403C1C933DE9C9CABF5E5095C0FD32F53F8A19BFC07A6256C070F0AFBFCCAE3A40EA0AEDBF59BB9E40C6D310C0BD9B874099EE7C3F49974840401747408DAFB83E118572C0F569CEC04C43303D5FBCE03F94BF17409A1A32C08CA564402A38B13FE537FFBF904855C04E74953C97862AC0A504C33F1230B7C01BB6B73F548E064043D48CBF640C0AC1B9F631403AAE8EBFBBFA68C0FD8A30405A8510C12CF4C9C04B0976BF24BF113FE977A440C307B7BF7A702EC068BE10C03D2357C03F82E73E0BF4B63F7A65C6BF9B35194068B91E3F6C2CD2BF21637EC06C006EC034EF96C064BE86BED63F8840EFE5C8BFF8BEF840EE5C5640711D80BEF17C40C0B26BBE40CE39ABC0B122B53F11BD86BF007DEF3FBDC19340D4C0384018ADEC40B1831B3FD11735BF71C08FBF58FC55BFA0382AC0ADD6093F3AD186C09FC112C1DBB26240CD2956403E7BB3406306DD3FA4E556BF03322BC0C08737C04802C3BF95121A3FD34D86C04F3C85C0B86EC93E27C92DC0404970C044E5FB3FA0AA7EBF9F7C753FCB1877C067EE8E40001AEC3EDEFF7040F2F4CFBEA9682DC0EB8F7CBF188D05C0DE1EA44054AAFEBE8A3194BF210861408D530DC0EBCA0C4043208EBFC6FD90BEC264823FCB5A8B409F4AB0BFBF1205C010C7003E0FF0B6C06ADB7EBF6074C23FC2501DBF0FFA1240CF851640C97B5D40D79DFEBFBEE931C00185A4C09C003A40E49B04403C59CEBCF3C98640A21164BA2DD969404CF93540478BA4C06AB500C169A7BD40882562C08A24CF3F02AD704054238EC0510F2A4092B5393E00FC0541E8D8BA402A9980BF4DC536402E145DBF1024413F2AE5993F936366BDEE6AE1BEA9405A406F41A140191DC1C0EDE9D3BFC189E63E81E2FD3EACF736C01A37813FD54036C0459594BFAEF3EABFA91BD5C0F0E7FE3F8AE5E8BF1DC00AC0753A0D404B67F9BF3A5ADB3E83B2EB40030CD5C00C6EC1BFF6D4B6BFA96B86C00F86CCC0664E8C40C249B03F2C0A2C3F7949034003EC24BEADC88FBD1E13344087722FBFF8100F401D02BC40E21ACBBE52B47840EEABB93FB9B08E3E56CCAA3E89728FBF831AD2C064C774C0104C1F4025860440151782BE8F1D98C09F4A95C0C96CD13F607FD4BEF90EC6BEFD41FFBFDF662B408F6D04402CE5FABF42D307C00129E83F80B1F1BE1BE10C401F64733FC189D53E087A0EBFE431243FBFE43B3D493CCEC0777C8ABF7D384B40FB3DDEBFDBF992C03E7EB33F63207C3DB5FBA0C02757B54064CEA43F7B14FD3F265D73BF6FC060405FC4BD3E8983F63FEF19BEBF56B1BD3F88A1A63F0BD192C03E82E2BD5F883540B892873F227A97BFCE4BB2405DAA5EC0CBBA5DBF958017C015A8F7BF24FCDFBF678C90C0456313C039B3F9BF75CF05C176B374BF73A179C0FC97CEBF83205B3F0D32C840CCB5A83E5B6874404B909C3F99DF4140501FE2C0EF7735BEBFC1793F7512184094AD41BF76FA4CC07DBE0540124A74404BA861BF551F8A40378BA13FD086E0BF43080440725182C07C1F86C0833257BDAE09BCC02546143FE5806540A81298C042EA4A406587844058E15D3F17E41B4041EE93C084D08C4044D530C0201E2F40071C60C07189F2BD59D2BE3FC25B30C0C2CC3A40CB56D5404C47C4C075E1B5BE4AED713F9A1315BD86F5C1BF9E665EC006D439409357873FE6FC85BFA5DABB3F5492B13EF7E77740471B4E408019BD3EB3A7613ED91F1E3F6DD2583F4A2A74BF8031B5BFC1C97F40181D933FF550B2C091EE0840C55DA33FC11035C0BBC5F2BFE5B54C3FE5734740DC258740E7C86DC04EE75B3E455E06C0F3781BC0C3CEDC3F2694E53FDF4DCABFB07A65BFFE9BBF4003B6CB3E025A1FBE99F9AA3F2E7557C0B261A4BF0E01853FCF1F1F3F076A8BC04DA48A3F9465CF3FBC78104027A38DBD4C2C7C4016FB1F3FCE32A340653507BF01E3A2C029B93CC0145579C0318E75C0FD1C23C0F6F995BE140A4BBF9C6048C0080CC4BE33105CC0436B68C092D4923FAF540FC0A61F7BC0791E28BE64B19940C43DDD3FFFFB0FC04F12073F790A37BF81CDD43EC31F97BFBE218EC04C316FBFF7E458C05DCEFDBFA0E311C0A3043A3DE3E9DA3E913784C0B3BB8940F68619C0AF46A2C0865033BE9F5F1E4067D64A40FCA260C0AF5F13C06E684940FFF13B40801F1341867083C082103940A0F8053ED75CECBF5E5C8E3F70EADD3DD843A4BF12E4C13F8F70F7BF79BDAEBFBDE383BFCB8AA8BFE3606A40CD050A408DAD144042A0843FB3A87EC026168440EA0F0940B4E43DC0D10B29C0E5C983C0A8A8A5BFFBCBD8BFA0CE2E40622776BEA12EFA3F2AF29EBE2B0637C02A36AA40FD176340247B75408DE7CBBD825AD8BF4655A33F609A63409852E5400878273E6FB54B4022458AC05688A5C0A45DB73E2E7E95C01662CD3FEC252F4048157DC0F04CA4BDF2AB67C05A0DADBFD841E8BF9B1ED2BFE3699640F45C25C076376BBED0424BC0B9715C406BBEA83F9069073FE74821BF18FA6A401B1FF73F75A5E33FDD1BE7BF7701CABF61C859C0ABFE6A3FBA6A5AC02E2BB53FF7E62BC0CA295A3FF0790FBF7BF3443C020B993CD92C1A403DD75140F75367BE2DE992BFF1F7053FC892DCBE80124AC04A3E14C0AD813FBF70D30ABFA39335BE2159B3406033A83FCA23A7BF1ABA633F6D00C9409123B43F0F385D407963A93F23EEDDC0DABDBBBF76D6AB3ECB4C24C07775B83F24516FC04A170D3F62D840BFC5FE0340B730DC3C1DF7714011D05540CA07D7BD83579EBF2937014072F30040D4AD8C409E943A404BACA63FCDD5163DE6224ABF98765A3F8FB24EC08D97F53EC57CAABF19B5DB3FA60D253FFBCD8B40E28722C010C2CB40EE4EB0408B5C90C04AA0C5C0E037903F3C4E92C0A04DE63F34D354C07685BC407B19E93ECAA041C0FC0FFABE7788C7BF693BBEC0E035443FF6A76740ED03084090A605C00561DABF1677B3C0DE9A4D4080B6FABF93271D406A9AD4BE9E7AAFBF97429EC0EFE05CC0880D51C08E0467C03FF12EC008344E3F99E52440206709C0F414E13F5C4FF2BF3DEF4140B8A400C08D7D11C01AC1D7C0E62719C044EB6CC088F88640273C55C06E8610C0A2E81F404983A2C0651364BF8D1519C098A012BFF9AF95BF"> : tensor<3x5x40xf32>
    return %0 : tensor<3x5x40xf32>
  }
}

