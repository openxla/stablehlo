// RUN-DISABLED: stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt -inline | stablehlo-translate --interpret
// RUN: diff <(stablehlo-translate --deserialize %s.0_9_0.bc | stablehlo-opt) <(stablehlo-opt %s)
// RUN: diff <(stablehlo-translate --serialize --target=current %s | stablehlo-translate --deserialize | stablehlo-opt) <(stablehlo-opt %s)

module @jit_testcase {
  func.func public @main() -> tensor<i1> {
    %0 = stablehlo.constant dense<0> : tensor<1xi32>
    %1:2 = call @inputs() : () -> (tensor<1x125xf32>, tensor<1xf32>)
    %2 = call @expected() : () -> tensor<1x125xf32>
    %3 = "stablehlo.scatter"(%1#0, %0, %1#1) ({
    ^bb0(%arg0: tensor<f32>, %arg1: tensor<f32>):
      stablehlo.return %arg1 : tensor<f32>
    }) {scatter_dimension_numbers = #stablehlo.scatter<update_window_dims = [0], inserted_window_dims = [1], scatter_dims_to_operand_dims = [1]>, unique_indices = true} : (tensor<1x125xf32>, tensor<1xi32>, tensor<1xf32>) -> tensor<1x125xf32>
    %4 = stablehlo.custom_call @check.eq(%3, %2) : (tensor<1x125xf32>, tensor<1x125xf32>) -> tensor<i1>
    return %4 : tensor<i1>
  }
  func.func private @inputs() -> (tensor<1x125xf32>, tensor<1xf32>) {
    %0 = stablehlo.constant dense<"0x9F4AB93D7B9AA33F3368B640F0122CC0841D3ABFDE33E9BE078FDEBFC36B94C0B0DFD23FB104C93F00ABFABD708B834028968D4022E5B03FA967303F78081C4042FE91C020AA863F498B03BFDE494CBFFC3B21BF4465CC3F00B4D03EBADBC3BF07608AC04744473FAF5AB24034C21DC17BCC2A40C08715C02E098B3F9D3DF7BE246664BB043920BF786AE2C07F3C0BBF3FB0A0BF1E2E7BC073818FC098346140391549BF818A8C3F910C7B401BCD263F2C388940829E53BDE51E653F1BD813406494813F371B2E40B4CB663E0F5050C0590E0A3E14A88E4038B30B4050980240CE0ADC3F2DADDEBE46FE37BF4AD1653F354B87C0B39B16400076733F01A069C0B97599C013006A3F0F98B2BF925EF740298E1740B7CB203FE303B2C04F60153FFB1A383F59CA883F7237E6C0F16FC3BF2BE5A5C07F4F0A3F094C1D401C0A373FE19D27BFB9D3AD4019CE883F070DA7401E1D393FA419BDC0F356954024B465C09FA2BC3FB52B41C02FFF00C0A05A04C0B1D366BFAD883640C0E10540512485BE2B9808C0002711C0C28018408D78044049511CC0E33E95C0E62653BEFD809CBFA15A51BF1C589F3E5C0981404BA3D7BE873779BE193CF0BDF826EA3F3AB81940F2CDFD3F9808654068EA0340ACAFA4BF0551BBBF8DA47F40323609BF2DDD03C0C60E34406FBE504037DFD13FD92D1CBE80B7DDBF"> : tensor<1x125xf32>
    %1 = stablehlo.constant dense<-3.70265698> : tensor<1xf32>
    return %0, %1 : tensor<1x125xf32>, tensor<1xf32>
  }
  func.func private @expected() -> tensor<1x125xf32> {
    %0 = stablehlo.constant dense<"0x55F86CC07B9AA33F3368B640F0122CC0841D3ABFDE33E9BE078FDEBFC36B94C0B0DFD23FB104C93F00ABFABD708B834028968D4022E5B03FA967303F78081C4042FE91C020AA863F498B03BFDE494CBFFC3B21BF4465CC3F00B4D03EBADBC3BF07608AC04744473FAF5AB24034C21DC17BCC2A40C08715C02E098B3F9D3DF7BE246664BB043920BF786AE2C07F3C0BBF3FB0A0BF1E2E7BC073818FC098346140391549BF818A8C3F910C7B401BCD263F2C388940829E53BDE51E653F1BD813406494813F371B2E40B4CB663E0F5050C0590E0A3E14A88E4038B30B4050980240CE0ADC3F2DADDEBE46FE37BF4AD1653F354B87C0B39B16400076733F01A069C0B97599C013006A3F0F98B2BF925EF740298E1740B7CB203FE303B2C04F60153FFB1A383F59CA883F7237E6C0F16FC3BF2BE5A5C07F4F0A3F094C1D401C0A373FE19D27BFB9D3AD4019CE883F070DA7401E1D393FA419BDC0F356954024B465C09FA2BC3FB52B41C02FFF00C0A05A04C0B1D366BFAD883640C0E10540512485BE2B9808C0002711C0C28018408D78044049511CC0E33E95C0E62653BEFD809CBFA15A51BF1C589F3E5C0981404BA3D7BE873779BE193CF0BDF826EA3F3AB81940F2CDFD3F9808654068EA0340ACAFA4BF0551BBBF8DA47F40323609BF2DDD03C0C60E34406FBE504037DFD13FD92D1CBE80B7DDBF"> : tensor<1x125xf32>
    return %0 : tensor<1x125xf32>
  }
}

